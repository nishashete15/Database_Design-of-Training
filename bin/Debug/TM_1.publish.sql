/*
Deployment script for TM

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.
*/

GO
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;

SET NUMERIC_ROUNDABORT OFF;


GO
:setvar DatabaseName "TM"
:setvar DefaultFilePrefix "TM"
:setvar DefaultDataPath "C:\Program Files\Microsoft SQL Server\MSSQL16.SQLEXPRESS\MSSQL\DATA\"
:setvar DefaultLogPath "C:\Program Files\Microsoft SQL Server\MSSQL16.SQLEXPRESS\MSSQL\DATA\"

GO
:on error exit
GO
/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/
:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END


GO
USE [$(DatabaseName)];


GO
PRINT N'The following operation was generated from a refactoring log file 99ab9fce-3bf1-43f7-b80f-c7abcdc40577';

PRINT N'Rename [dbo].[Reg_Training].[Id] to Training_Id';


GO
EXECUTE sp_rename @objname = N'[dbo].[Reg_Training].[Id]', @newname = N'Training_Id', @objtype = N'COLUMN';


GO
PRINT N'The following operation was generated from a refactoring log file ce631938-8b1d-4639-a340-6f4d1f2b52dd';

PRINT N'Rename [dbo].[Courses].[Id] to Course_Id';


GO
EXECUTE sp_rename @objname = N'[dbo].[Courses].[Id]', @newname = N'Course_Id', @objtype = N'COLUMN';


GO
PRINT N'The following operation was generated from a refactoring log file 724a0084-26c5-452e-a09c-2d3739a519fa';

PRINT N'Rename [dbo].[Admin].[Id] to Admin_Id';


GO
EXECUTE sp_rename @objname = N'[dbo].[Admin].[Id]', @newname = N'Admin_Id', @objtype = N'COLUMN';


GO
PRINT N'The following operation was generated from a refactoring log file cd36c36b-d52d-4ce6-90ce-b14e30462e6b';

PRINT N'Rename [dbo].[Employees].[Id] to Emp_Id';


GO
EXECUTE sp_rename @objname = N'[dbo].[Employees].[Id]', @newname = N'Emp_Id', @objtype = N'COLUMN';


GO
PRINT N'Rename refactoring operation with key 8de5d717-b6b6-4f0f-a0a6-0ae8792deefe, 9b1305fa-9818-4450-a2c6-58786996d4a8 is skipped, element [dbo].[Course_language].[Id] (SqlSimpleColumn) will not be renamed to Course_Id';


GO
PRINT N'Rename refactoring operation with key d7a5c787-e188-4638-ad28-e562d0992212 is skipped, element [dbo].[language].[Id] (SqlSimpleColumn) will not be renamed to language_Id';


GO
PRINT N'Rename refactoring operation with key 1f4bee33-608e-4268-b998-e1a7b62e61cf is skipped, element [dbo].[FAQ].[Id] (SqlSimpleColumn) will not be renamed to FAQ_Id';


GO
PRINT N'Rename refactoring operation with key fcb1c11e-9193-41c2-993f-049cf1f14f80, d46de007-db75-4249-a9a4-5d68afddb284 is skipped, element [dbo].[Topic].[Id] (SqlSimpleColumn) will not be renamed to test_Id';


GO
PRINT N'Rename refactoring operation with key 39e71ac4-9af7-43bd-b796-2a2ef95fc8ed is skipped, element [dbo].[Topic].[Title] (SqlSimpleColumn) will not be renamed to Test_name';


GO
PRINT N'Rename refactoring operation with key dc37ca87-a22c-4b22-bf4a-ef1354bc5499 is skipped, element [dbo].[Result].[Id] (SqlSimpleColumn) will not be renamed to result_Id';


GO
PRINT N'Altering Table [dbo].[Courses]...';


GO
ALTER TABLE [dbo].[Courses]
    ADD [Description]          NVARCHAR (MAX) NULL,
        [Learning_outcome]     NVARCHAR (MAX) NULL,
        [Software_requirement] NVARCHAR (MAX) NULL,
        [Picture]              IMAGE          NULL;


GO
PRINT N'Creating Table [dbo].[Course_language]...';


GO
CREATE TABLE [dbo].[Course_language] (
    [Course_Id]   INT NOT NULL,
    [language_id] INT NULL,
    PRIMARY KEY CLUSTERED ([Course_Id] ASC)
);


GO
PRINT N'Creating Table [dbo].[FAQ]...';


GO
CREATE TABLE [dbo].[FAQ] (
    [FAQ_Id]  INT            NOT NULL,
    [FAQ_qns] NVARCHAR (MAX) NULL,
    [FAQ_ans] NVARCHAR (MAX) NULL,
    PRIMARY KEY CLUSTERED ([FAQ_Id] ASC)
);


GO
PRINT N'Creating Table [dbo].[language]...';


GO
CREATE TABLE [dbo].[language] (
    [language_Id] INT        NOT NULL,
    [Lang_name]   NCHAR (10) NULL,
    PRIMARY KEY CLUSTERED ([language_Id] ASC)
);


GO
PRINT N'Creating Table [dbo].[Result]...';


GO
CREATE TABLE [dbo].[Result] (
    [result_Id]  INT          NOT NULL,
    [Percentage] DECIMAL (18) NULL,
    [Score]      DECIMAL (18) NULL,
    [Grade]      NCHAR (10)   NULL,
    PRIMARY KEY CLUSTERED ([result_Id] ASC)
);


GO
PRINT N'Creating Table [dbo].[Topic]...';


GO
CREATE TABLE [dbo].[Topic] (
    [test_Id]    INT        NOT NULL,
    [Test_name]  NCHAR (10) NULL,
    [Start_date] DATETIME   NULL,
    [End_date]   DATETIME   NULL,
    PRIMARY KEY CLUSTERED ([test_Id] ASC)
);


GO
-- Refactoring step to update target server with deployed transaction logs
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '99ab9fce-3bf1-43f7-b80f-c7abcdc40577')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('99ab9fce-3bf1-43f7-b80f-c7abcdc40577')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'ce631938-8b1d-4639-a340-6f4d1f2b52dd')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('ce631938-8b1d-4639-a340-6f4d1f2b52dd')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '724a0084-26c5-452e-a09c-2d3739a519fa')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('724a0084-26c5-452e-a09c-2d3739a519fa')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'cd36c36b-d52d-4ce6-90ce-b14e30462e6b')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('cd36c36b-d52d-4ce6-90ce-b14e30462e6b')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '8de5d717-b6b6-4f0f-a0a6-0ae8792deefe')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('8de5d717-b6b6-4f0f-a0a6-0ae8792deefe')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '9b1305fa-9818-4450-a2c6-58786996d4a8')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('9b1305fa-9818-4450-a2c6-58786996d4a8')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'd7a5c787-e188-4638-ad28-e562d0992212')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('d7a5c787-e188-4638-ad28-e562d0992212')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '1f4bee33-608e-4268-b998-e1a7b62e61cf')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('1f4bee33-608e-4268-b998-e1a7b62e61cf')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'fcb1c11e-9193-41c2-993f-049cf1f14f80')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('fcb1c11e-9193-41c2-993f-049cf1f14f80')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'd46de007-db75-4249-a9a4-5d68afddb284')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('d46de007-db75-4249-a9a4-5d68afddb284')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '39e71ac4-9af7-43bd-b796-2a2ef95fc8ed')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('39e71ac4-9af7-43bd-b796-2a2ef95fc8ed')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'dc37ca87-a22c-4b22-bf4a-ef1354bc5499')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('dc37ca87-a22c-4b22-bf4a-ef1354bc5499')

GO

GO
PRINT N'Update complete.';


GO
